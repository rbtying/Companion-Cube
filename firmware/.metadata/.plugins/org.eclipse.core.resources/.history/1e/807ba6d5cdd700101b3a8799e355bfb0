/*
 * PID.cpp
 *
 *  Created on: Sep 5, 2011
 *      Author: rbtying
 */

#include "PID.h"

PID::PID(PID_Params * p) {
	m_param = p;
}

void PID::setInput(double in) {

}

void PID::getOutput(double out) {

}

void PID::clear() {

}

void PID::process(double dt) {
	m_param->error = m_param->set - m_param->input;
	m_param->accumulated += m_param->error * dt;
	m_param->accumulated = constrain(m_param->accumulated,
			-(m_param->accLimit), m_param->accLimit);
	m_param->output = m_param->proportional * m_param->error
			+ m_param->integral * m_param->accumulated + m_param->derivative
			* (m_param->error - m_param->previous) / dt;
	m_param->previous = m_param->error;
}
